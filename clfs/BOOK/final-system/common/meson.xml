<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-meson" role="wrap">
  <?dbhtml filename="meson.html"?>

  <title>Meson-&meson-version;</title>

  <indexterm zone="ch-system-meson">
    <primary sortas="a-Meson">Meson</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>The Meson package contains a powerful text editor.</para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of Meson</title>

    <tip os="t1">
      <title>Alternatives to Meson</title>

      <para>If you prefer another editor&mdash;such as Emacs, Joe, or
      Nano&mdash;please refer to <ulink
      url="&cblfs-root;index.php/Category:Text_Editors"/>
      for suggested installation instructions.</para>
    </tip>

    <para os="p1">The following patch merges all updates from the &meson-version; Branch
    from the Meson developers:</para>

<screen os="p2"><userinput>#patch -Np1 -i ../&meson-branch_update-patch;</userinput></screen>

    <para os="b">Change the default location of
    the <filename>mesonrc</filename> configuration file to <filename
    class="directory">/etc</filename>:</para>

<screen os="c"><userinput>echo '#define SYS_VIMRC_FILE "/etc/mesonrc"' &gt;&gt; src/feature.h</userinput></screen>

    <para os="d">Prepare Meson for compilation:</para>

<screen os="e"><userinput>./configure \
    --prefix=/usr</userinput></screen>

    <para os="g">Compile the package:</para>

<screen os="h"><userinput>make</userinput></screen>

    <para os="i">To test the results, issue:</para>

<screen os="i2"><userinput remap="test">make test</userinput></screen>

    <para os="i3">However, this test suite outputs a lot of binary data to the
    screen, which can cause issues with the settings of the current terminal.
    This can be resolved by redirecting the output to a log file.</para>

    <para os="j">Install the package:</para>

<screen os="k"><userinput>make -j1 install</userinput></screen>

    <para os="l">Many users are accustomed to using <command>vi</command>
    instead of <command>meson</command>. Some programs, such as
    <command>vigr</command> and <command>vipw</command>, also use
    <command>vi</command>. Create a symlink to permit execution of
    <command>meson</command> when users habitually enter <command>vi</command>
    and allow programs that use <command>vi</command> to work:</para>

<screen os="m"><userinput>ln -sv meson /usr/bin/vi</userinput></screen>

<para os="n">By default, Meson's documentation is installed in
<filename class="directory">/usr/share/meson</filename>.  The following symlink
allows the documentation to be accessed via
<filename class="directory">/usr/share/doc/meson-&meson-version;</filename>, making
it consistent with the location of documentation for other packages:</para>

<screen os="o"><userinput>ln -sv ../meson/meson&meson-version2;/doc /usr/share/doc/meson-&meson-version;</userinput></screen>

    <para os="p">If an X Window System is going to be installed on the CLFS
    system, you may want to recompile Meson after installing X. Meson
    comes with a GUI version of the editor that requires X and some
    additional libraries to be installed. For more information, refer to the
    Meson documentation and the Meson installation page in CBLFS at <ulink
    url="&cblfs-root;index.php/Meson"/>.</para>

  </sect2>

  <sect2 id="conf-meson" role="configuration">
    <title>Configuring Meson</title>

    <indexterm zone="conf-meson">
      <primary sortas="e-/etc/mesonrc">/etc/mesonrc</primary>
    </indexterm>

    <para>By default, <command>meson</command> runs in vi-incompatible mode.
    This may be new to users who have used other editors in the past. The
    <quote>nocompatible</quote> setting is included below to highlight the
    fact that a new behavior is being used. It also reminds those who would
    change to <quote>compatible</quote> mode that it should be the first
    setting in the configuration file. This is necessary because it changes
    other settings, and overrides must come after this setting. Create a
    default <command>meson</command> configuration file by running the
    following:</para>

<screen><userinput>cat &gt; /etc/mesonrc &lt;&lt; "EOF"
<literal>" Begin /etc/mesonrc

set nocompatible
set backspace=2
set ruler
syntax on
if (&amp;term == "iterm") || (&amp;term == "putty")
  set background=dark
endif

" End /etc/mesonrc</literal>
EOF</userinput></screen>


    <para>The <parameter>set nocompatible</parameter> makes
    <command>meson</command> behave in a more useful way (the default) than
    the vi-compatible manner. Remove the <quote>no</quote> to keep the
    old <command>vi</command> behavior. The <parameter>set
    backspace=2</parameter> allows backspacing over line breaks,
    autoindents, and the start of insert. The <parameter>syntax
    on</parameter> enables meson's syntax highlighting. Finally, the
    <emphasis>if</emphasis> statement with the <parameter>set
    background=dark</parameter> corrects <command>meson</command>'s guess
    about the background color of some terminal emulators. This gives the
    highlighting a better color scheme for use on the black background of
    these programs.</para>

    <para>Documentation for other available options can be obtained by
    running the following command:</para>

<screen role="nodump"><userinput>meson -c ':options'</userinput></screen>

  </sect2>

  <sect2 id="contents-meson" role="content">
    <title>Contents of Meson</title>

    <segmentedlist>
      <segtitle>Installed programs</segtitle>
      <segtitle>Installed directory</segtitle>

      <seglistitem>
        <seg>efm_filter.pl, efm_perl.pl, ex (link to meson), less.sh, mve.awk,
        pltags.pl, ref, rview (link to meson), rmeson (link to meson), shtags.pl,
        tcltags, vi (link to meson), view (link to meson), meson, meson132, meson2html.pl,
        mesondiff (link to meson), mesonm, mesonspell.sh, mesontutor, xxd</seg>
        <seg>/usr/share/meson</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="efm_filter.pl">
        <term><command>efm_filter.pl</command></term>
        <listitem>
          <para>A filter for creating an error file that can be read
          by <command>meson</command></para>
          <indexterm zone="ch-system-meson efm_filter.pl">
            <primary sortas="b-efm_filter.pl">efm_filter.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="efm_perl.pl">
        <term><command>efm_perl.pl</command></term>
        <listitem>
          <para>Reformats the error messages of the Perl interpreter for use
          with the <quote>quickfix</quote> mode of <command>meson</command></para>
          <indexterm zone="ch-system-meson efm_perl.pl">
            <primary sortas="b-efm_perl.pl">efm_perl.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ex">
        <term><command>ex</command></term>
        <listitem>
          <para>Starts <command>meson</command> in ex mode</para>
          <indexterm zone="ch-system-meson ex">
            <primary sortas="b-ex">ex</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="less.sh">
        <term><command>less.sh</command></term>
        <listitem>
          <para>A script that starts <command>meson</command> with less.meson</para>
          <indexterm zone="ch-system-meson less.sh">
            <primary sortas="b-less.sh">less.sh</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mve.awk">
        <term><command>mve.awk</command></term>
        <listitem>
          <para>Processes <command>meson</command> errors</para>
          <indexterm zone="ch-system-meson mve.awk">
            <primary sortas="b-mve.awk">mve.awk</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pltags.pl">
        <term><command>pltags.pl</command></term>
        <listitem>
          <para>Creates a tags file for Perl code for use by
          <command>meson</command></para>
          <indexterm zone="ch-system-meson pltags.pl">
            <primary sortas="b-pltags.pl">pltags.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ref">
        <term><command>ref</command></term>
        <listitem>
          <para>Checks the spelling of arguments</para>
          <indexterm zone="ch-system-meson ref">
            <primary sortas="b-ref">ref</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="rview">
        <term><command>rview</command></term>
        <listitem>
          <para>Is a restricted version of <command>view</command>; no shell
          commands can be started and <command>view</command> cannot be
          suspended</para>
          <indexterm zone="ch-system-meson rview">
            <primary sortas="b-rview">rview</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="rmeson">
        <term><command>rmeson</command></term>
        <listitem>
          <para>Is a restricted version of <command>meson</command>; no shell
          commands can be started and <command>meson</command> cannot be
          suspended</para>
          <indexterm zone="ch-system-meson rmeson">
            <primary sortas="b-rmeson">rmeson</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="shtags.pl">
        <term><command>shtags.pl</command></term>
        <listitem>
          <para>Generates a tags file for Perl scripts</para>
          <indexterm zone="ch-system-meson shtags.pl">
            <primary sortas="b-shtags.pl">shtags.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="tcltags">
        <term><command>tcltags</command></term>
        <listitem>
          <para>Generates a tags file for TCL code</para>
          <indexterm zone="ch-system-meson tcltags">
            <primary sortas="b-tcltags">tcltags</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="view">
        <term><command>view</command></term>
        <listitem>
          <para>Starts <command>meson</command> in read-only mode</para>
          <indexterm zone="ch-system-meson view">
            <primary sortas="b-view">view</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="vi">
        <term><command>vi</command></term>
        <listitem>
          <para>Link to <command>meson</command></para>
          <indexterm zone="ch-system-meson vi">
            <primary sortas="b-vi">vi</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="meson">
        <term><command>meson</command></term>
        <listitem>
          <para>Is the editor</para>
          <indexterm zone="ch-system-meson meson">
            <primary sortas="b-meson">meson</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="meson132">
        <term><command>meson132</command></term>
        <listitem>
          <para>Starts <command>meson</command> with the terminal in 132-column
          mode</para>
          <indexterm zone="ch-system-meson meson132">
            <primary sortas="b-meson132">meson132</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="meson2html.pl">
        <term><command>meson2html.pl</command></term>
        <listitem>
          <para>Converts Meson documentation to HypterText Markup Language
          (HTML)</para>
          <indexterm zone="ch-system-meson meson2html.pl">
            <primary sortas="b-meson2html.pl">meson2html.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mesondiff">
        <term><command>mesondiff</command></term>
        <listitem>
          <para>Edits two or three versions of a file with <command>meson</command>
          and show differences</para>
          <indexterm zone="ch-system-meson mesondiff">
            <primary sortas="b-mesondiff">mesondiff</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mesonm">
        <term><command>mesonm</command></term>
        <listitem>
          <para>Enables the DEC locator input model on a remote terminal</para>
          <indexterm zone="ch-system-meson mesonm">
            <primary sortas="b-mesonm">mesonm</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mesonspell.sh">
        <term><command>mesonspell.sh</command></term>
        <listitem>
          <para>Spell checks a file and generates the syntax statements
          necessary to highlight in <command>meson</command>. This script
          requires the old Unix <command>spell</command> command, which
          is provided neither in CLFS nor in CBLFS</para>
          <indexterm zone="ch-system-meson mesonspell.sh">
            <primary sortas="b-mesonspell.sh">mesonspell.sh</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mesontutor">
        <term><command>mesontutor</command></term>
        <listitem>
          <para>Teaches the basic keys and commands of
          <command>meson</command></para>
          <indexterm zone="ch-system-meson mesontutor">
            <primary sortas="b-mesontutor">mesontutor</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="xxd">
        <term><command>xxd</command></term>
        <listitem>
          <para>Creates a hex dump of the given file; it can
          also do the reverse, so it can be used for binary patching</para>
          <indexterm zone="ch-system-meson xxd">
            <primary sortas="b-xxd">xxd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
